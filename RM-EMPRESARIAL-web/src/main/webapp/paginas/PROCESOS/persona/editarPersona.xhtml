<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">

    <ui:composition>

        <p:dialog id="PersonaEditDlg" widgetVar="PersonaEditDialog" modal="true" resizable="false" 
                  header="Editar Persona." position="center center" draggable="false"
                   width="800" closable="false">
			
            <h:form id="PersonaEditForm">
                <p:growl id="growl" showDetail="true" sticky="false" life="4000"/> 
                <h:panelGroup id="display">
                    <h:panelGrid columns="4" style="width: 100%">

                        <p:outputLabel value="#{bundle.EditPersonaLabel_perTipoIdentificacion}" for="perTipoIdentificacion" />
                        <p:selectOneMenu id="perTipoIdentificacion" value="#{controladorEditarPersona.personaEditar.perTipoIdentificacion}" 
                                         title="#{bundle.EditPersonaTitle_perTipoIdentificacion}" 
                                         required="true" requiredMessage="#{bundle.EditPersonaRequiredMessage_perTipoIdentificacion}" 
                                         style="width:125px">
                            <p:ajax process="@this" update="display"></p:ajax>
                            <f:selectItem itemLabel="Seleccione uno..." itemValue=""/>
                            <f:selectItem itemLabel="CEDULA" itemValue="C" />
                            <f:selectItem itemLabel="RUC" itemValue="R" />
                            <f:selectItem itemLabel="PASAPORTE" itemValue="P" />
                        </p:selectOneMenu>

                        <p:outputLabel value="#{bundle.EditPersonaLabel_perIdentificacion}" for="perIdentificacion" />
                        <p:inputText id="perIdentificacion" value="#{controladorEditarPersona.personaEditar.perIdentificacion}" title="#{bundle.EditPersonaTitle_perIdentificacion}" required="true" requiredMessage="#{bundle.EditPersonaRequiredMessage_perIdentificacion}"/>

                        <p:outputLabel value="Nombres" for="perNombre" rendered="#{controladorEditarPersona.personaEditar.perTipoIdentificacion eq 'N'}"/>
                        <p:outputLabel value="Nombres" for="perNombre" rendered="#{controladorEditarPersona.personaEditar.perTipoIdentificacion eq 'C'}" />
                        <p:outputLabel value="Nombres" for="perNombre" rendered="#{controladorEditarPersona.personaEditar.perTipoIdentificacion eq 'P'}" />
                        <p:outputLabel value="Razón Social" for="perNombre" rendered="#{controladorEditarPersona.personaEditar.perTipoIdentificacion eq 'R'}" />
                        <p:inputText id="perNombre" value="#{controladorEditarPersona.personaEditar.perNombre}" style="text-transform: uppercase" title="#{bundle.CreatePersonaTitle_perNombre}" required="true" requiredMessage="#{bundle.CreatePersonaRequiredMessage_perNombre}"/>

                        <p:outputLabel value="Apellido Paterno" for="perApellidoPaterno" rendered="#{controladorEditarPersona.personaEditar.perTipoIdentificacion eq 'N'}"/>
                        <p:outputLabel value="Apellido Paterno" for="perApellidoPaterno" rendered="#{controladorEditarPersona.personaEditar.perTipoIdentificacion eq 'C'}"/>
                        <p:outputLabel value="Apellido Paterno" for="perApellidoPaterno" rendered="#{controladorEditarPersona.personaEditar.perTipoIdentificacion eq 'P'}"/>
                        <p:outputLabel value="Nombre Comercial" for="perApellidoPaterno" rendered="#{controladorEditarPersona.personaEditar.perTipoIdentificacion eq 'R'}"/>
                        <p:inputText id="perApellidoPaterno" value="#{controladorEditarPersona.personaEditar.perApellidoPaterno}" style="text-transform: uppercase" title="#{bundle.CreatePersonaTitle_perApellidoPaterno}" 
                                     required="#{controladorEditarPersona.personaEditar.perTipoIdentificacion != 'R'}" requiredMessage="#{bundle.CreatePersonaRequiredMessage_perApellidoPaterno}"/>

                        <p:outputLabel value="#{bundle.EditPersonaLabel_perApellidoMaterno}" for="perApellidoMaterno" />
                        <p:inputText id="perApellidoMaterno" style="text-transform:uppercase;" value="#{controladorEditarPersona.personaEditar.perApellidoMaterno}" title="#{bundle.CreatePersonaTitle_perApellidoMaterno}" />

                        <p:outputLabel value="#{bundle.CreatePersonaLabel_perFechaNacimiento}" for="perFechaNacimiento" />
                        <p:calendar id="perFechaNacimiento" pattern="dd/MM/yyyy"  value="#{controladorEditarPersona.personaEditar.perFechaNacimiento}" title="#{bundle.EditPersonaTitle_perFechaNacimiento}" required="true" requiredMessage="#{bundle.EditPersonaRequiredMessage_perFechaNacimiento}" showOn="button"/>

                        <p:outputLabel value="#{bundle.CreatePersonaLabel_perFechaDefuncion}" for="perFechaDefuncion" />
                        <p:calendar id="perFechaDefuncion" pattern="dd/MM/yyyy"  value="#{controladorEditarPersona.personaEditar.perFechaDefuncion}" title="#{bundle.EditPersonaTitle_perFechaDefuncion}"  showOn="button"/>

                        <p:outputLabel value="#{bundle.CreatePersonaLabel_perTelefono}" for="perTelefono" />
                        <p:inputMask id="perTelefono" mask="999999999" value="#{controladorEditarPersona.personaEditar.perTelefono}" title="#{bundle.CreatePersonaTitle_perTelefono}"></p:inputMask>

                        <p:outputLabel value="#{bundle.CreatePersonaLabel_perCelular}" for="perCelular" />
                        <p:inputMask  mask="9999999999"  id="perCelular" value="#{controladorEditarPersona.personaEditar.perCelular}" title="#{bundle.CreatePersonaTitle_perCelular}" ></p:inputMask>

                        <p:outputLabel value="#{bundle.CreatePersonaLabel_perEmail}" for="perEmail" />
                        <p:inputText id="perEmail" value="#{controladorEditarPersona.personaEditar.perEmail}" title="#{bundle.CreatePersonaTitle_perEmail}">
                            <f:validateRegex  pattern="^((\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*)|(\s*))$"/>
                        </p:inputText>

                        <p:outputLabel value="#{bundle.CreatePersonaLabel_perDireccion}" for="perDireccion" />
                        <p:inputText id="perDireccion" value="#{controladorEditarPersona.personaEditar.perDireccion}" title="#{bundle.CreatePersonaTitle_perDireccion}" required="true" requiredMessage="#{bundle.CreatePersonaRequiredMessage_perDireccion}"/>

                        <p:outputLabel value="#{bundle.CreatePersonaLabel_perSexo}" for="perSexo" />
                        <p:selectOneMenu id="perSexo" value="#{controladorEditarPersona.personaEditar.perSexo}" title="#{bundle.CreatePersonaTitle_perSexo}" required="true" requiredMessage="Seleccionar sexo" style="width:125px">
                            <f:selectItem itemLabel="Seleccione uno..." itemValue=""></f:selectItem>
                            <f:selectItem itemLabel="FEMENINO" itemValue="F"></f:selectItem>
                            <f:selectItem itemLabel="MASCULINO" itemValue="M"></f:selectItem>
                        </p:selectOneMenu>

                        <p:outputLabel value="#{bundle.CreatePersonaLabel_perGenero}" for="perGenero" />                        
                        <p:selectOneMenu id="perGenero" value="#{controladorEditarPersona.personaEditar.perGenero}" title="#{bundle.CreatePersonaTitle_perGenero}" required="true" requiredMessage="Seleccionar sexo" style="width:125px">
                            <f:selectItem itemLabel="Seleccione uno..." itemValue=""></f:selectItem>
                            <f:selectItem itemLabel="FEMENINO" itemValue="F"></f:selectItem>
                            <f:selectItem itemLabel="MASCULINO" itemValue="M"></f:selectItem>
                        </p:selectOneMenu>

                        <p:outputLabel value="#{bundle.CreatePersonaLabel_perEstadoCivil}" for="perEstadoCivil" />
                        <p:selectOneMenu id="perEstadoCivil" value="#{controladorEditarPersona.personaEditar.perEstadoCivil}" title="#{bundle.CreatePersonaTitle_perEstadoCivil}" required="true" requiredMessage="Seleccionar estado civil" style="width:125px">
                            <p:ajax event="change" update="busquedaConyuge perIdConyuge perIdConyugeNom btnFiltrar perDisolucionConyugal" listener="#{controladorEditarPersona.compConyuge()}"/>
                            <f:selectItem itemLabel="Seleccione uno..." itemValue=""></f:selectItem>
                            <f:selectItem itemLabel="SOLTERO/A" itemValue="S"></f:selectItem>
                            <f:selectItem itemLabel="CASADO/A" itemValue="C"></f:selectItem>
                            <f:selectItem itemLabel="DIVORCIADO/A" itemValue="D"></f:selectItem>
                            <f:selectItem itemLabel="VIUDO/A" itemValue="V"></f:selectItem>
                            <f:selectItem itemLabel="UNIÓN DE HECHO" itemValue="UH"></f:selectItem>
                        </p:selectOneMenu>

                        <p:outputLabel value="C.I Conyuge" for="perIdConyuge" />
                        <h:panelGroup>
                            <h:panelGrid columns="2">
                                <p:inputText id="busquedaConyuge" maxlength="20" value="#{controladorEditarPersona.ciConyuge}" 
                                             autocomplete="false" 
                                             disabled="#{controladorEditarPersona.personaEditar.perEstadoCivil == 'S' or controladorEditarPersona.personaEditar.perEstadoCivil == 'D' or controladorEditarPersona.personaEditar.perEstadoCivil == 'V'}"
                                             required="true" requiredMessage="Ingresar identificacion de conyuge">
                                    <p:ajax event="change" listener="#{controladorEditarPersona.traerConyuge()}" update="perIdConyuge perIdConyugeNom growl @this"/>
                                    
                                </p:inputText>
                                <p:commandButton disabled="#{controladorEditarPersona.personaEditar.perEstadoCivil == 'S' or controladorEditarPersona.personaEditar.perEstadoCivil == 'D' or controladorEditarPersona.personaEditar.perEstadoCivil == 'V'}" id="btnFiltrar" 
                                                 class="orange-btn" icon="fa fa-search" 
                                                 actionListener="#{controladorFiltradoPersona.prepararFiltrado('PerC', ':PersonaEditForm:perIdConyuge :PersonaEditForm:perIdConyugeNom :PersonaEditForm:busquedaConyuge')}" 
                                                 oncomplete="PF('dlgFiltradoPersonaI').show();" 
                                                 immediate="true" process="@this">
                                </p:commandButton>
                            </h:panelGrid>
                        </h:panelGroup>

                        <p:inputText id="perIdConyuge" disabled="#{controladorEditarPersona.personaEditar.perEstadoCivil == 'S' or controladorEditarPersona.personaEditar.perEstadoCivil == 'D' or controladorEditarPersona.personaEditar.perEstadoCivil == 'V'}"
                                     value="#{controladorEditarPersona.personaEditar.perIdConyuge.perApellidoPaterno.trim()} #{controladorEditarPersona.personaEditar.perIdConyuge.perApellidoMaterno.trim()}" 
                                     title="#{bundle.CreatePersonaTitle_perIdConyuge}" 
                                     readonly="true"
                                     required="true"
                                     requiredMessage="Ingresar conyuge valido"/>


                        <p:inputText id="perIdConyugeNom" 
                                     disabled="#{controladorEditarPersona.personaEditar.perEstadoCivil == 'S' or controladorEditarPersona.personaEditar.perEstadoCivil == 'D' or controladorEditarPersona.personaEditar.perEstadoCivil == 'V'}" 
                                     value="#{controladorEditarPersona.personaEditar.perIdConyuge.perNombre.trim()}" readonly="true"/>


                        <p:outputLabel value="#{bundle.CreatePersonaLabel_perDisolucionConyugal}" for="perDisolucionConyugal" 
                                       rendered="#{controladorEditarPersona.personaEditar.perTipoIdentificacion eq 'P' or controladorEditarPersona.personaEditar.perTipoIdentificacion eq 'C'}"/>
                        <p:selectBooleanCheckbox id="perDisolucionConyugal" disabled="#{controladorEditarPersona.disableConyuge}" 
                                                 value="#{controladorEditarPersona.perDisolucionConyugal}" 
                                                 title="#{bundle.CreatePersonaTitle_perDisolucionConyugal}"
                                                 rendered="#{controladorEditarPersona.personaEditar.perTipoIdentificacion eq 'P' or controladorEditarPersona.personaEditar.perTipoIdentificacion eq 'C'}"/>

                        <p:outputLabel value="Discapacidad" for="perCalidad" />
                        <p:selectBooleanCheckbox id="perCalidad" value="#{controladorEditarPersona.perCalidad}" title="#{bundle.CreatePersonaTitle_perCalidad}"/>

                        <p:outputLabel value="#{bundle.CreatePersonaLabel_perEstado}" for="perEstado" />
                        <p:selectOneMenu id="perEstado" value="#{controladorEditarPersona.personaEditar.perEstado}"
                                         title="#{bundle.CreatePersonaTitle_perEstado}" 
                                         required="true" requiredMessage="#{bundle.CreatePersonaRequiredMessage_perEstado}" style="width:125px">
                            <f:selectItem itemLabel="Seleccione uno..." itemValue=""/>
                            <f:selectItem itemLabel="ACTIVO" itemValue="A"></f:selectItem>
                            <f:selectItem itemLabel="INACTIVO" itemValue="I"></f:selectItem>
                        </p:selectOneMenu>


                    </h:panelGrid>
                    <p:commandButton class="green-btn" icon="fa fa-save"
                                     actionListener="#{controladorEditarPersona.update()}"
                                     value="#{bundle.Save}" update=":growl PersonaEditForm"                                  
                                     />
                    <p:commandButton class="red-btn" type="button" icon="fa fa-close" value="Salir" onclick="PF('PersonaEditDialog').hide()"/>
                </h:panelGroup>
            </h:form>
        </p:dialog>
        
        
        
    </ui:composition>
</html>
